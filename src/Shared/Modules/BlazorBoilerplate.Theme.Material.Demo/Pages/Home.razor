@page "/"
@inject IJSRuntime JsRuntime

<MainContainer Title="Worklab"
               SubTitle="Выбирая профессию, ты выбираешь своё будущее"
               ContentTitle="Ты можешь стать">
    <!--Carousel Gallery sourse https://swiperjs.com/ + fancybox https://fancyapps.com/fancybox/3/ -->
    <div class="carousel-gallery">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <a href="https://images.pexels.com/photos/48794/boy-walking-teddy-bear-child-48794.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260" data-fancybox="gallery">
                        <div class="image" style="background-image: url(https://images.pexels.com/photos/48794/boy-walking-teddy-bear-child-48794.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500)">
                            <div class="overlay">
                                <em class="mdi mdi-magnify-plus"></em>
                            </div>
                        </div>
                    </a>
                    <div class="carousel-caption">
                        Экономистом
                    </div>
                </div>
                <div class="swiper-slide">
                    <a href="https://images.pexels.com/photos/248280/pexels-photo-248280.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260" data-fancybox="gallery">
                        <div class="image" style="background-image: url(https://images.pexels.com/photos/248280/pexels-photo-248280.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500)">
                            <div class="overlay">
                                <em class="mdi mdi-magnify-plus"></em>
                            </div>
                        </div>
                    </a>
                    <div class="carousel-caption">
                        Юристом
                    </div>
                </div>
                <div class="swiper-slide">
                    <a href="https://images.pexels.com/photos/89095/pexels-photo-89095.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260" data-fancybox="gallery">
                        <div class="image" style="background-image: url(https://images.pexels.com/photos/89095/pexels-photo-89095.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500)">
                            <div class="overlay">
                                <em class="mdi mdi-magnify-plus"></em>
                            </div>
                        </div>
                    </a>
                    <div class="carousel-caption">
                        Медиком
                    </div>
                </div>
                <div class="swiper-slide">
                    <a href="https://images.pexels.com/photos/669319/pexels-photo-669319.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260" data-fancybox="gallery">
                        <div class="image" style="background-image: url(https://images.pexels.com/photos/669319/pexels-photo-669319.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500)">
                            <div class="overlay">
                                <em class="mdi mdi-magnify-plus"></em>
                            </div>
                        </div>
                    </a>
                    <div class="carousel-caption">
                        Дипломатом
                    </div>
                </div>
                <div class="swiper-slide">
                    <a href="https://images.pexels.com/photos/277477/pexels-photo-277477.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260" data-fancybox="gallery">
                        <div class="image" style="background-image: url(https://images.pexels.com/photos/277477/pexels-photo-277477.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500)">
                            <div class="overlay">
                                <em class="mdi mdi-magnify-plus"></em>
                            </div>
                        </div>
                    </a>
                    <div class="carousel-caption">
                        Экологом
                    </div>
                </div>
                <div class="swiper-slide">
                    <a href="https://images.pexels.com/photos/928276/pexels-photo-928276.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260" data-fancybox="gallery">
                        <div class="image" style="background-image: url(https://images.pexels.com/photos/928276/pexels-photo-928276.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500)">
                            <div class="overlay">
                                <em class="mdi mdi-magnify-plus"></em>
                            </div>
                        </div>
                    </a>
                    <div class="carousel-caption">
                        Программистом
                    </div>
                </div>
            </div>
            <!-- Add Arrows -->
            <div class="swiper-pagination"></div>
        </div>
    </div>
    <!--#Carousel Gallery-->
    <div class="dropdown">
        <a class="btn btn-primary dropdown-toggle" @onclick="e => MenuToggled = !MenuToggled " role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Dropdown link
        </a>
        <div class="dropdown-menu @(MenuToggled?"show": "")" aria-labelledby="dropdownMenuLink">
            <a class="dropdown-item" href="/medical_business">Лечебное дело</a>
            <a class="dropdown-item" href="#">Another action</a>
            <a class="dropdown-item" href="#">Something else here</a>
        </div>
    </div>
    <div class="grid-container" style="justify-content: center; text-align: center">
        <div class="grid-item col-sm-12 col-sm-12 col-md-8">
            <h3 style="justify-content: center; text-align: center; font-family: cursive;">Выбирай профессию и попробуй её прямо сейчас!!</h3>
            @if (!IsAuthenticated)
            {
                <MatButton Icon="power_settings_new"
                           Raised="true"
                           Label="Начать"
                           Link="/account/login">
                </MatButton>
            }
        </div>
    </div>
</MainContainer>

<MatSnackbar @bind-IsOpen="@lazySnackbarIsOpen">
    <MatSnackbarContent>Если вам понравился продукт, поддержите нас в соцсетях</MatSnackbarContent>
    <MatSnackbarActions>
        <a href="https://www.instagram.com/ylsp_kg/" target="_blank" style="text-decoration: none">
            <MatButton>
                <i class="fa fa-instagram" style="color: white !important" aria-hidden="true"></i>
            </MatButton>
        </a>
        <a href="https://www.facebook.com/ylsp.2020/" target="_blank" style="text-decoration: none">
            <MatButton>
                <i class="fa fa-facebook" style="color: white !important" aria-hidden="true"></i>
            </MatButton>
        </a>
    </MatSnackbarActions>
</MatSnackbar>

@code{ bool lazySnackbarIsOpen = false;
    private bool IsAuthenticated = false;
    bool MenuToggled { get; set; } = false;

    [CascadingParameter]
    Task<AuthenticationState> authenticationStateTask { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        await Task.Delay(TimeSpan.FromSeconds(3)).ContinueWith((_) =>
        {
            this.lazySnackbarIsOpen = true;
        });
        await JsRuntime.InvokeAsync<object>("initializeCarousel");

        var user = (await authenticationStateTask).User;
        if (user.Identity.IsAuthenticated)
        {
            IsAuthenticated = true;
        }
    }

    public void Dispose()
    {
    }
}